$(function () {
    var supDem = {
        init: function () {
            supDem.listen()
        },
        listen: function () {
            var contentData = [{
                link: "../../supplyInformation/supplyInformation.html",
                user: "赣南脐橙专业合作社",
                userImgUrl: "img/userLogo.png",
                iden: "江西赣州赣南县",
                title: "出售赣南脐橙",
                time: "1小时前",
                text: "本合作社种植赣南脐橙50亩地，产量约20万斤，现出售，有需要的请联系电话18889878888。",
                read: "888",
                heart: "666",
                img: [
                    "img/new.png", "img/new.png", "img/new.png", "img/new.png"
                ]
            }, {
                link: "../../supplyInformation/supplyInformation.html",
                user: "赣南脐橙专业合作社",
                userImgUrl: "img/userLogo.png",
                iden: "江西赣州赣南县",
                title: "出售赣南脐橙",
                time: "1小时前",
                text: "本合作社种植赣南脐橙50亩地，产量约20万斤，现出售，有需要的请联系电话18889878888。",
                read: "888",
                heart: "666",
                img: [
                    "img/new.png", "img/new.png", "img/new.png", "img/new.png"
                ]
            }, {
                link: "../../supplyInformation/supplyInformation.html",
                user: "赣南脐橙专业合作社",
                userImgUrl: "img/userLogo.png",
                iden: "江西赣州赣南县",
                title: "出售赣南脐橙",
                time: "1小时前",
                text: "本合作社种植赣南脐橙50亩地，产量约20万斤，现出售，有需要的请联系电话18889878888。",
                read: "888",
                heart: "666",
                img: [
                    "img/new.png", "img/new.png", "img/new.png", "img/new.png"
                ]
            }, {
                link: "../../supplyInformation/supplyInformation.html",
                user: "赣南脐橙专业合作社",
                userImgUrl: "img/userLogo.png",
                iden: "江西赣州赣南县",
                title: "出售赣南脐橙",
                time: "1小时前",
                text: "本合作社种植赣南脐橙50亩地，产量约20万斤，现出售，有需要的请联系电话18889878888。",
                read: "888",
                heart: "666",
                img: [
                    "img/new.png", "img/new.png", "img/new.png", "img/new.png"
                ]
            }, {
                link: "../../supplyInformation/supplyInformation.html",
                user: "赣南脐橙专业合作社",
                userImgUrl: "img/userLogo.png",
                iden: "江西赣州赣南县",
                title: "出售赣南脐橙",
                time: "1小时前",
                text: "本合作社种植赣南脐橙50亩地，产量约20万斤，现出售，有需要的请联系电话18889878888。",
                read: "888",
                heart: "666",
                img: [
                    "img/new.png", "img/new.png", "img/new.png", "img/new.png"
                ]
            }, {
                link: "../../supplyInformation/supplyInformation.html",
                user: "赣南脐橙专业合作社",
                userImgUrl: "img/userLogo.png",
                iden: "江西赣州赣南县",
                title: "出售赣南脐橙",
                time: "1小时前",
                text: "本合作社种植赣南脐橙50亩地，产量约20万斤，现出售，有需要的请联系电话18889878888。",
                read: "888",
                heart: "666",
                img: [
                    "img/new.png", "img/new.png", "img/new.png", "img/new.png"
                ]
            }, {
                link: "../../supplyInformation/supplyInformation.html",
                user: "赣南脐橙专业合作社",
                userImgUrl: "img/userLogo.png",
                iden: "江西赣州赣南县",
                title: "出售赣南脐橙",
                time: "1小时前",
                text: "本合作社种植赣南脐橙50亩地，产量约20万斤，现出售，有需要的请联系电话18889878888。",
                read: "888",
                heart: "666",
                img: [
                    "img/new.png", "img/new.png", "img/new.png", "img/new.png"
                ]
            }, {
                link: "../../supplyInformation/supplyInformation.html",
                user: "赣南脐橙专业合作社",
                userImgUrl: "img/userLogo.png",
                iden: "江西赣州赣南县",
                title: "出售赣南脐橙",
                time: "1小时前",
                text: "本合作社种植赣南脐橙50亩地，产量约20万斤，现出售，有需要的请联系电话18889878888。",
                read: "888",
                heart: "666",
                img: [
                    "img/new.png", "img/new.png", "img/new.png", "img/new.png"
                ]
            }, {
                link: "../../supplyInformation/supplyInformation.html",
                user: "赣南脐橙专业合作社",
                userImgUrl: "img/userLogo.png",
                iden: "江西赣州赣南县",
                title: "出售赣南脐橙",
                time: "1小时前",
                text: "本合作社种植赣南脐橙50亩地，产量约20万斤，现出售，有需要的请联系电话18889878888。",
                read: "888",
                heart: "666",
                img: [
                    "img/new.png", "img/new.png", "img/new.png", "img/new.png"
                ]
            }, {
                link: "../../supplyInformation/supplyInformation.html",
                user: "赣南脐橙专业合作社",
                userImgUrl: "img/userLogo.png",
                iden: "江西赣州赣南县",
                title: "出售赣南脐橙",
                time: "1小时前",
                text: "本合作社种植赣南脐橙50亩地，产量约20万斤，现出售，有需要的请联系电话18889878888。",
                read: "888",
                heart: "666",
                img: [
                    "img/new.png", "img/new.png", "img/new.png", "img/new.png"
                ]
            }, ]

            var contentHTML = "";
            for (let i = 0; i < contentData.length; i++) {
                var imgList = ""
                var imgLength = contentData[i].img.length > 3 ? 3 : contentData[i].img.length
                for (let j = 0; j < imgLength; j++) {
                    imgList += `<li><img src="${contentData[i].img[j]}" alt=""></li>`
                }
                contentHTML += `<a href = ${contentData[i].link}><div class="supplyAndDemand-text">
                <div class="supplyAndDemand-text-title">
                    <div class="left">
                        <img src="${contentData[i].userImgUrl}" alt="">
                    </div>
                    <div class="center">
                        <p>${contentData[i].user}</p>
                        <p><span>${contentData[i].iden}</span></p>
                    </div>
                    <div class="right">
                        <p>${contentData[i].time}</p>
                    </div>
                </div>
                <div class="supplyAndDemand-text-content">
                    <p>${contentData[i].title}</p>
                    <p>${contentData[i].text}</p>
                </div>
                <div class="supplyAndDemand-text-img">
                    <ul>
                        ${imgList}
                    </ul>
                </div>
                <div class="count">
                    <p>
                        <span><img src="img/read.png" alt="">${contentData[i].read}人阅读</span>
                        <span><img src="img/heart.png" alt="">${contentData[i].heart}人阅读</span>
                    </p>
                </div>
            </div>
        </div></a>`
            }
            $("#contentHTML").html(contentHTML)

            $(document).on("click", ".menu ul li", function () {
                if ($(this).attr("id") === "fenlei") {
                    if ($(".listtt").css("display") === "none") {
                        $(".Area").show()
                        $(".listtt").show()
                        $(".mask").show()
                    } else {
                        $(".listtt").hide()
                        $(".Area").hide()
                        $(".mask").hide()
                    }
                }
            })
            $(document).on("click", ".mask", function () {
                $(".listtt").hide()
                $(".Area").hide()
                $(".mask").hide()
            })

        }
    }
    supDem.init()

    var mySwiper = new Swiper('.swiper-container', {
        autoplay: 3000,
        loop: true,
        speed: 1000,
        // slidesPerView: 'auto',
        pagination: '.swiper-pagination',
        autoplayDisableOnInteraction: false,
        centeredSlides: true
    })



    address(fruits[0].list);

    function address(data) {
        $(".AreaCenter ul").html('');
        $.each(data, function (i, v) {
            $(".AreaCenter ul").append('<li data-id=' + i + '><span>' + v.name + '</span></li>');
        });
        $('.AreaCenter ul li').on('click', {
            data: data
        }, Areas)
        $(".AreaCenter ul li").eq(0).trigger("click");
    }

    function Prompt() {
        var c = $(".AreaLeft .active").text() + '--' + $(".AreaCenter .active").text() + '--' + $(this).text();
        console.log(c);
        $(".listtt").hide()
        $(".Area").hide()
        $(".mask").hide()
    }

    function Areas(data) {
        $('.AreaCenter ul li').removeClass('active')
        $(this).addClass('active');
        var data = data.data.data
        $(".AreaCenter").css({
            "width": "33%"
        });
        $(".AreaRight").show();
        var id = $(this).attr('data-id');
        $(".AreaRight ul").html('');
        $.each(data[id].list2, function (index, item) {
            $(".AreaRight ul").append('<li data-cid=' + index + '><span>' + item + '</span</li>')
        })
        $(".AreaRight ul li").on('click', Prompt)
    }

    $(document).on("click", ".AreaLeft ul li", function () {
        $(".AreaLeft ul li").removeClass('active')
        $(this).addClass('active');
        for (let i = 0; i < fruits.length; i++) {
            if ($(this).index() == i) {
                address(fruits[i].list);
                $(".AreaCenter").css({
                    "width": "33%"
                });
            }
        }
    })

    var ulListHTML = "";
    for (var i = 0; i < fruits.length; i++) {
        if (i === 0) {
            ulListHTML += `<li class="active"><span>${fruits[i].name}</span></li>`
        } else {
            ulListHTML += `<li><span>${fruits[i].name}</span></li>`
        }
    }
    $("#ulList").html(ulListHTML)




})